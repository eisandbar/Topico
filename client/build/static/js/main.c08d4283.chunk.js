(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,s,t){},101:function(e,s,t){},102:function(e,s,t){"use strict";t.r(s);var n=t(1),c=t(54),r=t.n(c),a=t(8),i=t(4),l=(t(62),t(3)),o=t(0),u=function(e){return Object(o.jsx)("div",{className:"errors is-size-5",children:e.error})},j=function(e){return Object(o.jsx)("div",{children:e.errors?e.errors.map((function(e,s){return Object(o.jsx)(u,{error:e},s)})):""})},d=t(7),m=t(2),b=t.n(m),h=t(19),O=t(5),x=t(27),f=t.n(x),p="https://topico-chat.me:3080",v=function(){var e=Object(O.a)(b.a.mark((function e(s){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){f()(p+s.url,{method:"POST",body:JSON.stringify(s.data),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(s){return e(JSON.parse(s))}))})));case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),N=function(e){var s=Object(n.useState)(e),t=Object(l.a)(s,2),c=t[0],r=t[1];return{value:c,onChange:function(e){r(e.target.value)}}},g=function(e){var s=N(""),t=N(""),n=N(""),c=N(""),r=Object(i.g)(),a=function(){var a=Object(O.a)(b.a.mark((function a(i){var l,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i.preventDefault(),l={data:{username:s.value,email:t.value,password:n.value,password2:c.value},url:"/register"},e.setErrors([]),a.next=5,v(l);case 5:o=a.sent,e.setErrors(Object(h.a)(o.errors).map((function(e){return e.msg}))),o.success&&r.push(o.redirectUrl);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(o.jsxs)("form",{onSubmit:a,className:"box",children:[Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label is-size-3",children:" Name "}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",Object(d.a)(Object(d.a)({type:"name"},s),{},{placeholder:"Enter Name",className:"input is-size-5 is-rounded is-primary"}))})]}),Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label is-size-3",children:" Email "}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",Object(d.a)(Object(d.a)({type:"email"},t),{},{placeholder:"Enter Email",className:"input is-size-5 is-rounded is-primary"}))})]}),Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label is-size-3",children:" Password "}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",Object(d.a)(Object(d.a)({type:"password"},n),{},{placeholder:"Enter Password",className:"input is-size-5 is-rounded is-primary"}))})]}),Object(o.jsxs)("div",{className:"form-input",children:[Object(o.jsx)("label",{className:"label is-size-3",children:" Confirm Password "}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",Object(d.a)(Object(d.a)({type:"password"},c),{},{placeholder:"Confirm Password",className:"input is-size-5 is-rounded is-primary"}))})]}),Object(o.jsx)("div",{className:"control py-3",children:Object(o.jsx)("button",{type:"submit",className:"button p-3 is-primary",children:" Register "})})]})},w=(t(69),function(){var e=Object(n.useState)([]),s=Object(l.a)(e,2),t=s[0],c=s[1];return Object(o.jsxs)("div",{className:"fullheight flex-column",children:[Object(o.jsx)("div",{className:"top-row is-flex is-align-items-flex-end has-text-weight-semibold",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("p",{className:"has-text-white is-size-1 ",children:" Register "})})}),Object(o.jsxs)("div",{className:"middle-row",id:"scroll-style",children:[Object(o.jsx)("div",{className:"column is-one-quarter is-mobile"}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(g,{setErrors:c}),Object(o.jsx)(a.b,{to:"/login",children:Object(o.jsx)("p",{className:"is-size-5 has-text-weight-medium ",children:"Have an account? Login"})})]})]}),Object(o.jsx)("div",{className:"bottom-row",children:0!==t.length?Object(o.jsx)("div",{className:"box container",children:Object(o.jsx)(j,{errors:t})}):Object(o.jsx)("div",{})})]})}),y=(t(37),function(){var e=Object(O.a)(b.a.mark((function e(s){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.url,s.credentials,e.abrupt("return",new Promise((function(e,s){f()(p+t,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(s){return e(JSON.parse(s))}))})));case 2:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()),k=Object(n.createContext)(),S=function(e){var s=e.children,t=z();return Object(o.jsx)(k.Provider,{value:t,children:s})},C=function(){return Object(n.useContext)(k)},z=function(){var e=Object(n.useState)(null),s=Object(l.a)(e,2),t=s[0],c=s[1];return{loggedIn:t,signin:function(){var e=Object(O.a)(b.a.mark((function e(s){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={data:s,url:"/login",credentials:"include"},e.next=3,v(t);case 3:return n=e.sent,c(n.loggedIn),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),signout:function(){var e=Object(O.a)(b.a.mark((function e(){var s,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={url:"/logout",credentials:"include"},e.next=3,y(s);case 3:return t=e.sent,c(t.loggedIn),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),checkAuth:function(){var e=Object(O.a)(b.a.mark((function e(){var s,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={url:"/authenticate",credentials:"include"},e.next=3,y(s);case 3:return t=e.sent,c(t.loggedIn),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},E=Object(n.createContext)(),I=function(e){var s=e.children,t=R();return Object(o.jsx)(E.Provider,{value:t,children:s})},P=function(){return Object(n.useContext)(E)},R=function(){var e=Object(n.useState)({}),s=Object(l.a)(e,2);return{user:s[0],setUser:s[1]}},T=function(e){var s=N(""),t=N(""),n=Object(i.g)(),c=C(),r=P(),a=function(){var a=Object(O.a)(b.a.mark((function a(i){var l,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i.preventDefault(),l={email:s.value,password:t.value},a.next=4,c.signin(l);case 4:(o=a.sent).loggedIn?(r.setUser(o.user),n.push(o.redirectUrl)):e.setErrors(o.errors);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(o.jsxs)("form",{onSubmit:a,className:"box",children:[Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label is-size-3",children:" Email "}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",Object(d.a)(Object(d.a)({type:"email"},s),{},{placeholder:"Enter Email",className:"input is-size-5 is-rounded is-primary"}))})]}),Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)("label",{className:"label is-size-3",children:" Passsword "}),Object(o.jsx)("div",{className:"control",children:Object(o.jsx)("input",Object(d.a)(Object(d.a)({type:"password"},t),{},{placeholder:"Enter Password",className:"input is-size-5 is-rounded is-primary"}))})]}),Object(o.jsx)("div",{className:"control py-3",children:Object(o.jsx)("button",{type:"submit",className:"button p-3 is-primary",children:" Login "})})]})},L=function(){var e=Object(n.useState)([]),s=Object(l.a)(e,2),t=s[0],c=s[1];return Object(o.jsxs)("div",{className:"fullheight flex-column",children:[Object(o.jsx)("div",{className:"top-row is-flex is-align-items-flex-end",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("p",{className:"has-text-white is-size-1 has-text-weight-semibold",children:" Login "})})}),Object(o.jsx)("div",{className:"middle-row",id:"scroll-style",children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(T,{setErrors:c}),Object(o.jsx)(a.b,{to:"/register",children:Object(o.jsx)("p",{className:"is-size-5 has-text-weight-medium",children:" New here? Register "})})]})}),Object(o.jsx)("div",{className:"bottom-row",children:Object(o.jsx)(j,{errors:t})})]})},U=t.p+"static/media/user.8dc1274c.png",J=function(e){return Object(o.jsx)("div",{className:"avatar",children:Object(o.jsx)("figure",{className:"image "+e.class,children:Object(o.jsx)("img",{className:"is-rounded",src:U,alt:""})})})},D=function(e){var s=new Date(e.message.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"columns is-variable is-2 is-mobile",children:[Object(o.jsx)("div",{className:"column is-narrow",children:Object(o.jsx)(J,{class:"is-48x48"})}),Object(o.jsx)("div",{className:"column box m-2",children:Object(o.jsxs)("div",{className:"rows",children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("span",{className:"message-username",children:[" ",e.message.username," "]}),Object(o.jsxs)("span",{className:"has-text-grey",children:[" ",s," "]})]}),Object(o.jsx)("div",{className:"row message-text",children:e.message.messageText})]})})]})})},M=function(e){return Object(o.jsx)("div",{className:"",children:Object(o.jsx)("ul",{children:e.messages.map((function(e){return Object(o.jsx)(D,{message:e},e.id)}))})})},A=function(e){return Object(o.jsx)("div",{className:"button ml-2 is-info",onClick:e.handleSubmit,children:"Send"})},B=function(e){return Object(o.jsx)("div",{children:Object(o.jsx)("textarea",{className:"input is-info",value:e.value,onChange:e.handleChange,placeholder:"Comment"})})},q=function(e){var s=Object(n.useState)(""),t=Object(l.a)(s,2),c=t[0],r=t[1];return Object(o.jsxs)("div",{className:"columns is-mobile is-gapless",children:[Object(o.jsx)("div",{className:"column is-1"}),Object(o.jsx)("div",{className:"column",children:Object(o.jsx)(B,{value:c,handleChange:function(e){r(e.target.value)}})}),Object(o.jsx)("div",{className:"column is-2",children:Object(o.jsx)(A,{handleSubmit:function(s){e.sendMessage(c),r("")}})})]})},G=function(e){return Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)(J,{class:""}),Object(o.jsx)("div",{className:"profile-username has-text-weight-semibold has-text-white",children:e.username})]})},H=t(56),W=function(e){var s=e.username,t=e.roomId,c=function(e){var s=Object(n.useState)([]),t=Object(l.a)(s,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){!function(){var s=Object(O.a)(b.a.mark((function s(){var t,n;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,v({url:"/getMessages",data:{roomId:e}});case 2:t=s.sent,n=t.messages.map((function(e){return{id:e.id,username:e.username,roomname:e.roomname,messageText:e.messageText,date:e.date}})),r(n.reverse());case 5:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}()()}),[e]),[c,r]}(t),r=Object(l.a)(c,2),a=r[0],i=r[1],o=Object(n.useRef)();Object(n.useEffect)((function(){return o.current=Object(H.io)(p),o.current.emit("join room",{username:s,roomId:t}),o.current.on("chat message",(function(e){i((function(s){return[].concat(Object(h.a)(s),[e])}))})),function(){return o.current.disconnect()}}),[s,t,i]);return[a,function(e){o.current.emit("chat message",e)}]},F=function(e){return Object(o.jsx)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:Object(o.jsxs)("button",{onClick:e.handleClick||null,className:"is-hidden-tablet navbar-burger","aria-label":"menu","aria-expanded":"false",children:[Object(o.jsx)("span",{}),Object(o.jsx)("span",{}),Object(o.jsx)("span",{})]})})},K=(t(100),t(53),function(e){var s=C(),t=P().user,c=new URLSearchParams(Object(i.h)().search),r=W({username:t.username,roomId:c.get("cr")}),u=Object(l.a)(r,2),j=u[0],d=u[1],m=Object(i.h)(),b=Object(n.useState)("is-hidden-mobile"),h=Object(l.a)(b,2),O=h[0],x=h[1];return Object(o.jsxs)("div",{className:"fullheight",children:[Object(o.jsx)(F,{handleClick:function(){x("is-hidden-mobile"===O?"":"is-hidden-mobile")}}),Object(o.jsxs)("div",{className:"columns fullheight is-gapless is-mobile",children:[Object(o.jsx)("div",{className:"column left-column "+O,children:Object(o.jsxs)("div",{className:"rows fullheight",children:[Object(o.jsxs)("div",{className:"row profile flex-column",children:[Object(o.jsx)(G,{username:t.username}),Object(o.jsx)("button",{className:"button is-fullwidth is-rounded is-outlined is-warning has-background-white",onClick:s.signout,children:" Logout "})]}),Object(o.jsxs)("div",{className:"row side-bar",children:[Object(o.jsx)("div",{className:"block roomname",children:Object(o.jsx)("p",{className:"is-size-3 has-text-weight-semibold is-size-6-mobile",children:m.state.roomname})}),Object(o.jsx)(a.b,{to:"/rooms",className:"button is-fullwidth is-rounded is-outlined is-danger has-background-white",children:" Back "})]})]})}),Object(o.jsx)("div",{className:"column main-content",children:Object(o.jsxs)("div",{className:"rows fullheight",children:[Object(o.jsx)("div",{className:"row chat-messages",id:"scroll-style",children:Object(o.jsx)(M,{messages:j})}),Object(o.jsx)("div",{className:"row chat-input",children:Object(o.jsx)(q,{sendMessage:d})})]})})]})]})}),Q=(t(101),function(){return Object(o.jsxs)("div",{className:"fullheight flex-column",children:[Object(o.jsx)("div",{className:"top-row"}),Object(o.jsx)("section",{className:"hero is-halfheight is-primary",children:Object(o.jsx)("div",{className:"hero-body",children:Object(o.jsx)(a.b,{to:"/login",children:Object(o.jsxs)("div",{className:"",children:[Object(o.jsx)("p",{className:"title is-1",children:"Welcome to Topico!"}),Object(o.jsx)("p",{className:"subtitle is-4",children:"Continue"})]})})})}),Object(o.jsx)("div",{className:"bottom-row"})]})}),V=function(e){return Object(o.jsx)(a.b,{to:{pathname:"/chat",search:"?cr=".concat(e.room.id),state:{roomname:e.room.roomname}},children:Object(o.jsx)("li",{children:Object(o.jsx)("div",{className:"columns is-variable is-mobile is-vcentered",children:Object(o.jsx)("div",{className:"column",children:Object(o.jsxs)("span",{className:"button is-fullwidth is-rounded room-description is-size-5 has-text-weight-semibold",children:[" ",e.room.roomname," "]})})})})})},X=function(e){return Object(o.jsx)("div",{children:Object(o.jsx)("ul",{children:e.rooms.map((function(e){return Object(o.jsx)(V,{room:e},e.id)}))})})},Y=function(e){var s=Object(n.useState)(""),t=Object(l.a)(s,2),c=t[0],r=t[1],a=function(){var s=Object(O.a)(b.a.mark((function s(t){return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t.preventDefault(),e.createRoom(c.slice()),r("");case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return Object(o.jsxs)("form",{onSubmit:a,className:"columns",children:[Object(o.jsx)("div",{className:"column",children:Object(o.jsx)("input",{type:"username",value:c,onChange:function(e){r(e.target.value)},placeholder:"Enter room name",className:"input is-size-5 is-rounded is-primary"})}),Object(o.jsx)("div",{className:"column",children:Object(o.jsx)("button",{type:"submit",className:"button is-rounded is-size-5 has-text-weight-semibold",children:" Create Room "})})]})},Z=function(e){var s=function(){var e=Object(n.useState)([]),s=Object(l.a)(e,2),t=s[0],c=s[1];return Object(n.useEffect)((function(){!function(){var e=Object(O.a)(b.a.mark((function e(){var s,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/getRooms"});case 2:s=e.sent,t=s.rooms.map((function(e){return{id:e.roomId,roomname:e.roomname,icon:e.icon}})),c(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),[t,function(){var e=Object(O.a)(b.a.mark((function e(s){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({url:"/newRoom",data:{roomname:s}});case 2:n=e.sent,c([{id:n.rooms[0].roomId,roomname:n.rooms[0].roomname}].concat(Object(h.a)(t)));case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()]}(),t=Object(l.a)(s,2),c=t[0],r=t[1],a=C(),i=P().user,u=Object(n.useState)("is-hidden-mobile"),j=Object(l.a)(u,2),d=j[0],m=j[1];return Object(o.jsxs)("div",{className:"fullheight",children:[Object(o.jsx)(F,{handleClick:function(){m("is-hidden-mobile"===d?"":"is-hidden-mobile")}}),Object(o.jsxs)("div",{className:"columns fullheight is-gapless is-mobile",children:[Object(o.jsx)("div",{className:"column left-column "+d,children:Object(o.jsxs)("div",{className:"rows fullheight",children:[Object(o.jsxs)("div",{className:"row profile flex-column",children:[Object(o.jsx)(G,{username:i.username}),Object(o.jsx)("button",{className:"button is-rounded is-outlined is-warning has-background-white",onClick:a.signout,children:" Logout "})]}),Object(o.jsx)("div",{className:"row side-bar"})]})}),Object(o.jsx)("div",{className:"column main-content rooms",children:Object(o.jsxs)("div",{className:"rooms",id:"scrollbar",children:[Object(o.jsx)(X,{rooms:c}),Object(o.jsx)(Y,{createRoom:r})]})}),Object(o.jsx)("div",{className:"column has-background-primary-light is-hidden-mobile is-3"})]})]})},$=t(57),_=function(e){var s=e.children,t=Object($.a)(e,["children"]),c=C(),r=P(),a=Object(n.useState)(!0),u=Object(l.a)(a,2),j=u[0],m=u[1];return Object(n.useEffect)((function(){j&&function(){var e=Object(O.a)(b.a.mark((function e(){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.checkAuth();case 2:(s=e.sent)&&m(!1),c.loggedIn&&r.setUser({username:s.username});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()})),j?Object(o.jsx)("div",{children:"Loading"}):Object(o.jsx)(i.b,Object(d.a)(Object(d.a)({},t),{},{render:function(e){var t=e.location;return c.loggedIn?s:Object(o.jsx)(i.a,{to:{pathname:"/",state:{from:t}}})}}))},ee=function(){return Object(o.jsx)(S,{children:Object(o.jsx)(I,{children:Object(o.jsx)(a.a,{children:Object(o.jsxs)(i.d,{children:[Object(o.jsx)(i.b,{path:"/login",children:Object(o.jsx)(L,{})}),Object(o.jsx)(i.b,{path:"/register",children:Object(o.jsx)(w,{})}),Object(o.jsx)(_,{path:"/chat",children:Object(o.jsx)(K,{})}),Object(o.jsx)(_,{path:"/rooms",children:Object(o.jsx)(Z,{})}),Object(o.jsx)(i.b,{path:"/",exact:!0,children:Object(o.jsx)(Q,{})})]})})})})};r.a.render(Object(o.jsx)(ee,{}),document.getElementById("root"))},37:function(e,s,t){},53:function(e,s,t){},62:function(e,s,t){},69:function(e,s,t){}},[[102,1,2]]]);
//# sourceMappingURL=main.c08d4283.chunk.js.map